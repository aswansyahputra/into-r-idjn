---
title: "A walk into the R"
author: Muhammad Aswan Syahputra
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```
<!-- Baris kode di atas merupakan pengaturan untuk dokumen R Markdown dan tidak akan tercetak pada berkas dokumen akhir -->

## Selayang pandang

Berkas dokumen yang sedang Anda baca ini disebut dengan R Markdown. Di dalam dokumen R Markdown Anda dapat melakukan tiga hal esensial sekaligus, yaitu :

1. Menuliskan kode pemrograman untuk melakukan analisis
2. Menjalankan atau mengeksekusi kode pemrograman tersebut
3. Memberikan teks narasi dan interpretasi akan hasil analisis

Manfaat yang didapatkan dengan menggunakan R Markdown adalah Anda tidak perlu lagi menggunakan berbagai perangkat lunak dalam membuat laporan analisis data. Pekerjaan Anda akan menjadi jauh lebih mudah apabila suatu saat terjadi pemutakhiran data yang menyebabkan perlunya revisi analisis data dan penulisan laporan. Oleh karena itu, dalam pelatihan singkat ini dan seterusnya Anda diharapkan untuk terus menggunakan R Markdown dalam melakukan analisis dan pelaporan.

Bagaimana cara melakukan pengaturan teks di dalam berkas dokumen R Markdown? Pengaturan teks di dokumen R Markdown dapat dilakukan dengan menggunakan sintaks Markdown. Silakan klik menu "Help -- Markdown Quick Reference" di RStudio untuk melihat sontekan cara pengaturan teks menggunakan sintaks Markdown. Selanjutnya buatlah penomoran dan pengaturan untuk teks di bawah ini!

Kalimat ini tercetak tebal
Kalimat ini tercetak miring
Kalimat ini berisi tautan https://www.markdownguide.org/getting-started

Selain teks narasi seperti yang telah Anda baca hingga pada kalimat ini, Anda juga dapat menuliskan kode pemrograman di dokumen R Markdown. Namun untuk membedakan antara teks biasa dengan kode pemrograman diperlukan suatu blok yang disebut sebagai *chunk* ). Suatu *chunk* ditandai dengan adanya tiga *backticks* "`" pada awal dan akhir baris kode pemrograman seperti ditunjukan dalam contoh berikut:

```
tulis kode pemrograman
pada bagian ini
```

Selanjutnya untuk menegaskan bahasa pemrograman apa yang digunakan dan akan dieksekusi dalam suatu *chunk*, Anda harus menambahkan penanda "{bahasa_pemrograman}" tepat setelah penanda *backticks* di awal *chunk*. R Markdown mendukung dan dapat mengeksekusi beberapa jenis bahasa pemrograman selain R, misalnya Python, Julia, C, Fortran, SQL, dan Shell script. Dalam contoh berikut menunjukan penggunaan bahasa pemrograman R di dalam suatu *chunk*. Jalankan kombinasi kibor "Ctrl + Enter" untuk mengeksekusi baris kode dalam *chunk*!

```{r}
"I stand for data journalism" # Membuat data berupa string
hari_ini <- Sys.Date() # Menjalankan sebuah fungsi untuk mengetahui tanggal hari ini dan kemudian menyimpannya sebagai obyek bernama 'hari_ini'. Tanda `<-` yang bertindak sebagai 'assignment operator'
hari_ini # mencetak isi obyek 'hari_ini' pada layar
head(mtcars) # melihat 6 baris pertama dari data mtcars, mtcars adalah data bawaan yang tersedia di R
```

Kombinasi kibor "Ctrl + Alt + I" dapat Anda gunakan untuk membuah *chunk* dengan bahasa pemrograman R. Buatlah *chunk* baru berisi kode pemrograman R sebagai berikut!

filled.contour(volcano,
               color.palette = terrain.colors, 
               plot.title = title("Topografi Gunung Maunga Whau"), 
               key.title = title("Tinggi\n(meter)"))

Penting untuk dicatat bahwa R Markdown bukanlah berkas dokumen final. R Markdown berperan sebagai dokumen perantara untuk memproduksi dokumen final dengan berbagai format, misalnya dokumen teks biasa, salindia presentasi, laman web, atau bahkan aplikasi web interaktif. Beberapa ekstensi dokumen final yang dapat dihasilkan diantaranya adalah html, md, pdf, docx, odt, dan tex. Anda dapat memproduksi dokumen final dengan cara klik tombol "Knit" atau kombinasi "Ctrl + Shift + K". Silakan jalankan kombinasi kibor tersebut setelah Anda menyelesaikan modul ini.

## Fungsi dan paket

Dalam bahasa pemrograman R segala sesuatu dilakukan dengan menggunakan fungsi. Sederhananya sebuah fungsi memiliki tugas untuk mengolah suatu *input* menjadi *output*. Pada bagian di atas Anda telah diperkenalkan dengan beberapa fungsi yaitu `Sys.Date()`, `head()`, dan `filled.contour()`. Anda dapat mengetahui tujuan dan cara penggunaan dari suatu fungsi dengan menjalankan `?nama_fungsi` atau `help(nama_fungsi)` pada konsol RStudio.

Di bawah ini merupakan beberapa fungsi dasar yang dapat Anda gunakan untuk mengolah obyek bernama `iris` sebagai *input*. Buatlah catatan singkat mengenai kegunaan dari setiap fungsi yang digunakan!

```{r}
print(iris) # Mencetak data pada layar, Anda juga dapat langsung menggunakan `iris` untuk mencetak data pada layar
dim(iris) # ___
str(iris) # ___
colnames(iris) # ___
head(iris) # ___
head(iris, 10) # ___
tail(iris) # ___
tail(iris, 10) # ___
summary(iris) # ___
iris$Sepal.Length # ___
class(iris$Species) # ___
length(iris$Petal.Width) # m___
unique(iris$Species) # ___
mean(iris$Sepal.Length) # ___
sd(iris$Sepal.Length) # ___
median(iris$Sepal.Width) # ___
sum(iris$Petal.Length) # ___
plot(iris) # ___
```


Meskipun R telah memiliki banyak fungsi bawaan yang sangat bermanfaat, tidak jarang Anda memerlukan fungsionalitas lain yang tidak tersedia langsung di R. Di bahasa pemrograman R terdapat sistem ekstensi yang disebut sebagai paket. Anda dapat melakukan banyak hal dan berbagai tujuan dengan cara memasang paket yang sesuai. Terdapat berbagai sumber repositori tempat paket-paket tersebut tersimpan secara daring, diantaranya adalah CRAN (Comprehensive R Archive Network), GitHub, dan Bioconductor.

Anda dapat memasang paket yang berasal dari CRAN dengan menggunakan fungsi `install.packages("nama_paket")`. Pada RStudio Anda juga dapat melakukan hal tersebut melalui menu "Tools-Install Packages". Sekarang cobalah pasang paket "readr" dan "ggplot2"!

Penting untuk diingat bahwa Anda harus mengaktifkan paket terlebih dahulu setiap memulai sesi analsisis untuk dapat menggunakan fungsi-fungsi yang terdapat pada paket tersebut. Hal tersebut dapat dilakukan dengan menggunakan fungsi `library(nama_paket)`.

## Studi Kasus

Dalam pelatihan singkat ini Anda diminta untuk melakukan analisis terhadap lukisan Bob Ross yang dihimpun dari acara "The Joy of Painting". Anda diminta untuk mencoba membuat kembali grafik yang terdapat dalam laman https://fivethirtyeight.com/features/a-statistical-analysis-of-the-work-of-bob-ross/.



Studi kasus dalam latihan singkat ini adalah Anda diminta untuk melakukan analisis terhadap data Film Indonesia yang telah dikumpulkan sejak tahun 1926. Data tersebut tersedia sebagai berkas CSV dengan nama 'filmindonesia.csv' di dalam subdirektori 'data'. Bagaimana cara untuk mengimpor berkas CSV tersebut sehingga dapat diolah dan dianalisis menggunakan R? Anda dapat memanfaatkan fungsi `read_csv()` dari paket `readr` untuk melakukan hal tersebut. Sekarang aktifkanlah paket `readr` terlebih dahulu dan selanjutnya silakan impor 'filmindonesia.csv' sebagai obyek R bernama 'filmindonesia'!

```{r}
library(readr)
filmindonesia <- read_csv("data/filmindonesia.csv")
```

Sekarang cetaklah data tersebut pada layar dan lakukanlah inspeksi dengan menggunakan fungsi `str()` atau `summary()`

```{r}
library(tidyverse)
filmindonesia
```



```{r}
___("stopwords")
```

Selain dapat memasang paket dari direktori CRAN seperti pada kode sebelumnya, Anda juga dapat memasang dari direktori lainnya seperti GitHub dan Bioconductor. Prosedur memasang paket berbeda dengan contoh sebelumnya. Anda diminta untuk memasang paket "nusandata" yang terdapat pada [repositori GitHub](https://github.com/aswansyahputra/nusandata) dengan mengikuti petunjuk pada repositori tersebut. Buatlah kode untuk memasang dan mengaktifkan paket "nusandata" pada *chunk* berikut:

```{r}
___ # memasang paket
___ # mengaktifkan paket
```

Pada kode pemasangan paket tersebut digunakan simbol `::`. Dapatkah Anda menjelaskan arti dari penggunaan simbol tersebut? Dapatkah Anda menjelaskan perbedaan simbol `::` dengan `:::`?

## Pengolahan dan Visualisasi Data

Paket "nusandata" berisikan beberapa dataset tentang Indonesia, termasuk data transkrip Debat Capres 1 dan Debat Capres 2 yang diambil dari [BahasaKita](http://debatcapres.bahasakita.co.id). Saat ini Anda diminta untuk melakukan eksplorasi dan pengolahan data transkrip Debat Capres 1 yang tersaji dengan nama dataset `tks_debatcapres1_2019`.

Sebelum memulai eksplorasi dan pengolahan data, Anda dipersilakan untuk mengaktifkan paket "tidyverse" untuk melengkapi paket "stopwords" dan "nusandata" yang telah diaktifkan sebelumnya. Dapatkah Anda menyebutkan paket apa saja yang aktif saat Anda mengaktifkan paket "tidyverse"?

```{r}
library(___)
```

Anda dapat melihat gambaran umum data dengan menggunakan fungsi `str()` atau `glimpse` (dari paket "dplyr"). Ada berapa baris dan kolom yang terdapat pada dataset `tks_debatcapres1_2019`? Apa makna dari setiap kolom? Pada tanggal berapa debat tersebut berlangsung? (Petunjuk: Anda dapat menjalankan `?namadataset` untuk melihat dokumentasi. Dapatkah Anda menyebutkan kesalahan pada dokumentasi dataset debat capres tersebut?)

```{r}

```

Dalam latihan ini akan dilakukan pengolahan dan visualisasi kata-kata yang diucapkan dalam debat tersebut. Jalankan kode berikut untuk mengetahui penutur dalam transkrip debat tersebut:

```{r}
distinct(tks_debatcapres1_2019, penutur)
```

Ubahlah kode R diatas kedalam format *pipeline* menggunakan `%>%`! 

```{r}

```

Dalam melakukan analisis teks, penting untuk mempertimbangkan dan menghilangkan kata-kata yang umum digunakan dalam suatu bahasa. Kata-kata umum tersebut disebut dengan istilah *stopwords*. *Stopwords* Bahasa Indonesia dapat diambil dari paket "stopwords" dengan menggunakan fungsi `stopwords()`. Simpanlah *stopwords* Bahasa Indonesia tersebut dengan nama "stopwords_id"! (Petunjuk: Gunakan "stopwords-iso" sebagai sumber *stopwords*)

```{r}
stopwords_id <- ___
```

### Preparasi dataset

Kode R preparasi dataset untuk menghitung frekuensi kata tersedia sebagai pada *chunk* berikut.

```{r}
df1 <- mutate(
  tks_debatcapres1_2019,
  teks = str_to_lower(teks),
    teks = str_remove_all(teks, pattern = "[:punct:]")
)

df2 <- separate_rows(df1, teks)

df3 <- filter(
  df2,
  teks != "",
  !teks %in% stopwords_id
)

df4 <- count(
  df3,
  penutur, 
  teks, 
  sort = TRUE
)

df5 <- group_by(df4, penutur)

df6 <- top_n(df5, 25, wt = n)

df7 <- ungroup(df6)

df <- filter(df7, n >= 3)
```



### Visualisasi Data

Sedangkan kode dasar untuk membuat grafik batang frekuensi kata tersedia pada *chunk* berikut:

```{r}
df %>% 
  ggplot(aes(x = fct_reorder(teks, n), y = n)) +
  geom_col() +
  coord_flip()
```


 Anda diberi tugas untuk:

* Membuat kode preparasi dataset yang tersedia kedalam bentuk *pipeline* dengan menggunakan `%>%`. Ingat data `tks_debatcapres1_2019` harus ditulis pada baris pertama dan hasil akhir disimpan dalam obyek bernama `df`! 

* Membuat ringkasan alur yang ditempuh dengan memahami fungsi yang dijalankan pada setiap langkah hingga dataset siap untuk dibuat menjadi grafik. Contoh: 1. Membuat teks kedalam huruf kecil dan menghilangkan..., dan seterusnya. Sertakan perubahan yang terjadi pada dataset pada setiap langkah. Anda dapat membaca tujuan dan dokumentasi suatu fungsi dengan menjalankan `?namafungsi` pada konsol.

* Memperbaiki grafik frekuensi kata dengan ketentuan:
  + Satu grafik untuk setiap calon presiden
  + Satu grafik untuk setiap calon wakil presiden
  + Memberikan judul, *subtitle*, *caption* (menyebutkan sumber data), dan label yang sesuai pada sumbu x dan y. Petunjuk: baca dokumentasi fungsi `labs()`
  + Kostumisasi tema plot. Anda dapat menggunakan tema yg telah ada `theme_X()`, namun sangat disarankan untuk mengatur tema sendiri. Misalnya mengganti warna latarbelakang, jenis fonta, ukuran label, warna grafik, dan sebagainya.
  + [*For experienced user:*] Buatlah prosedur pembuatan grafik kedalam sebuah fungsi dengan dua argumen: "data" dan "penutur"!
  + [*For experienced user:*] Modifikasi dataset `tks_debatcapres1_2019` sehingga penutur dikategorikan menjadi 3, yaitu "Paslon 01", "Paslon 02", "Moderator". Hilangkan penutur "Arief Budiman" dan "Pembicara" sebelum membuat kategori! Anda dapat menggunakan pendekatan *nested ifelse*, `%in%`, atau `case_between`.
  + [*For experienced user:*] Buat grafik untuk setiap pasangan calon satu-per-satu. Kemudian buat grafik berisi data kedua paslon dengan menggunakan *facet*.
* Anda dapat mencetak hasil pekerjaan Anda dengan cara klik tombol "Knit" (Ctrl+Shift+K), namun sebelumnya ubah nilai argumen `eval` pada *chuck* awal dokumen ini menjadi menjadi `TRUE`. `knitr::opts_chunk$set(eval = TRUE)`
* **Jika telah selesai, Anda dipersilakan untuk mengeksplorasi dataset Debat Capres 2**
 
Selamat! Anda telah berhasil melakukan pengolahan dan visualisasi dataset transkrip Debat Capres 1! Langakah-langkah diatas bukan merupakan prosedur ideal untuk melakukan analisis teks, namun cukup untuk memberikan Anda gambaran bagaimana melakukan preparasi dan pengolahan data hingga visualisasi dasar. **Dapatkah Anda menyebutkan alasan mengapa prosedur di atas tidak ideal untuk analisis teks?**